(()=>{"use strict";const t=class{constructor(t=0,s=0,i=100,e=100,h="#FF009E"){this.x=t,this.y=s,this.width=i,this.height=e,this.colour=h}moveBy(t,s){this.x+=t,this.y+=s}moveTo(t,s){this.x=t,this.y=s}render(t){t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle=this.colour,t.fill(),t.closePath()}},s=class extends t{constructor(t=0,s=0,i=2,e=-2,h=10,l="white"){super(t,s,0,0,l),this.dx=i,this.dy=e,this.radius=h,this.colour=l}move(){this.moveBy(this.dx,this.dy)}render(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillstyle=this.colour,t.fill(),t.closePath()}},i=class extends t{constructor(t,s,i=75,e=20,h="#FF009E"){super(t,s,i,e,h),this.status=1}},e=class extends t{constructor(t,s,i,e,h,l){super(t,s,i,e,l),this.speed=h,this.colour=l}},h=class extends t{constructor(t,s,i,e="#8109E5",h="16px Impact"){super(s,i,0,0,e),this.text=t,this.value=0,this.font=h}render(t){t.font=this.font,t.fillStyle=this.colour,t.fillText(`${this.text} ${this.value}`,this.x,this.y)}},l=document.getElementById("myCanvas"),a=l.getContext("2d");new class{constructor(t,l){this.canvas=t,this.ctx=l;const a=new Image;a.src="../images/clouds.gif",this.bg=new class{constructor(t,s,i){this.x=t,this.y=s,this.image=i}render(t){t.drawImage(this.image,this.x,this.y)}}(0,0,a),this.ballRadius=10,this.ballColour="#F0B005",this.ball=new s(100,200,2,-2,this.ballRadius,this.ballColour),this.paddleHeight=10,this.paddleWidth=75,this.paddleSpeed=10,this.paddleColour="#3AFF00",this.paddleXStart=(this.canvas.width-this.paddleWidth)/2,this.paddleYStart=this.canvas.height-this.paddleHeight-5,this.paddle=new e(this.paddleXStart,this.paddleYStart,this.paddleWidth,this.paddleHeight,this.paddleSpeed,this.paddleColour),this.leftPressed=!1,this.rightPressed=!1,this.brickRows=4,this.brickColumns=5,this.brickWidth=75,this.brickHeight=20,this.brickPadding=10,this.brickOffsetTop=30,this.brickOffsetLeft=30,this.brickColour="#FF009E",this.bricks=new class{constructor(t,s,i,e,h,l,a,d){this.rows=t,this.columns=s,this.bricks=[],this.width=i,this.height=e,this.padding=h,this.offsetTop=l,this.offsetLeft=a,this.colour=d,this.loadBricks()}loadBricks(){for(let t=0;t<this.columns;t+=1){this.bricks[t]=[];for(let s=0;s<this.rows;s+=1){const e=t*(this.width+this.padding)+this.offsetLeft,h=s*(this.height+this.padding)+this.offsetTop;this.bricks[t][s]=new i(e,h,this.width,this.height,this.colour)}}}render(t){for(let s=0;s<this.columns;s+=1)for(let i=0;i<this.rows;i+=1){const e=this.bricks[s][i];1===e.status&&e.render(t)}}}(this.brickRows,this.brickColumns,this.brickWidth,this.brickHeight,this.brickPadding,this.brickOffsetTop,this.brickOffsetLeft,this.brickColour),this.GameLabelScore=new h("Score",8,20),this.GameLabelLives=new h("Lives",this.canvas.width-65,20),this.loadListeners(),this.draw()}loadListeners(){document.addEventListener("keydown",this.keyDownHandler.bind(this),!1),document.addEventListener("keyup",this.keyUpHandler.bind(this),!1),document.addEventListener("mousemove",this.mouseMoveHandler.bind(this),!1),this.GameLabelLives.value=3}keyDownHandler(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!0:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.leftPressed=!0)}keyUpHandler(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!1:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.leftPressed=!1)}mouseMoveHandler(t){const s=t.clientX-this.canvas.offsetLeft;s>0&&s<this.canvas.width&&this.paddle.moveTo(s-this.paddle.width/2,this.paddleYStart)}movePaddle(){this.rightPressed&&this.paddle.x<this.canvas.width-this.paddle.width?this.paddle.moveBy(7,0):this.leftPressed&&this.paddle.x>0&&this.paddle.moveBy(-7,0)}ballMovement(){(this.ball.x+this.ball.dx>this.canvas.width-this.ballRadius||this.ball.x+this.ball.dx<this.ballRadius)&&(this.ball.dx=-this.ball.dx),this.ball.y+this.ball.dy<this.ballRadius?this.ball.dy=-this.ball.dy:this.ball.y+this.ball.dy>this.canvas.height-this.ballRadius&&(this.ball.x>this.paddle.x&&this.ball.x<this.paddle.x+this.paddleWidth?this.ball.dy=-this.ball.dy:(this.GameLabelLives.value-=1,this.GameLabelLives.value?(this.ball.x=this.canvas.width/2,this.ball.y=this.canvas.height-30,this.ball.dx=3,this.ball.dy=-3):(alert("GAME OVER"),document.location.reload())))}collisionDetection(){for(let t=0;t<this.bricks.columns;t+=1)for(let s=0;s<this.bricks.rows;s+=1){const i=this.bricks.bricks[t][s];1===i.status&&this.ball.x>i.x&&this.ball.x<i.x+this.brickWidth&&this.ball.y>i.y&&this.ball.y<i.y+this.brickHeight&&(this.ball.dy=-this.ball.dy,i.status=0,this.GameLabelScore.value+=1,this.GameLabelScore.value===this.bricks.columns*this.bricks.rows&&alert(`Congratulations, You Win! You scored ${this.GameLabelScore.value} points.`))}}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.bg.render(this.ctx),this.ball.render(this.ctx),this.paddle.render(this.ctx),this.bricks.render(this.ctx),this.GameLabelScore.render(this.ctx),this.GameLabelLives.render(this.ctx),this.collisionDetection(),this.ball.move(),this.movePaddle(),this.ballMovement(),requestAnimationFrame(this.draw.bind(this))}}(l,a)})();